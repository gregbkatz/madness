<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>March Madness Bracket</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-bracket/0.11.1/jquery.bracket.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-bracket/0.11.1/jquery.bracket.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            color: #0057b7;
            margin-bottom: 10px;
        }

        /* NCAA bracket layout */
        .bracket-container {
            display: flex;
            flex-direction: column;
            margin: 20px 0;
        }

        .regions-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .region {
            width: 48%;
        }

        .region-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #0057b7;
            margin-bottom: 10px;
        }

        .final-four-container {
            width: 70%;
            margin: 0 auto;
            text-align: center;
        }

        .final-four-title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #0057b7;
            margin-bottom: 15px;
        }

        .bracket {
            overflow-x: auto;
            padding-bottom: 20px;
        }

        /* Customizing jquery-bracket styles */
        .jQBracket .team {
            background-color: #f5f8ff !important;
        }

        .jQBracket .team.win {
            background-color: #e3f2fd !important;
        }

        .jQBracket .connector {
            border-color: #0057b7 !important;
        }

        .jQBracket .teamContainer {
            height: auto !important;
        }

        /* Add this to ensure the bracket has enough vertical space */
        .jQBracket .round {
            margin-top: 15px;
            margin-bottom: 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>NCAA March Madness Bracket</h1>
        </header>

        <div class="bracket-container">
            <div class="regions-row">
                <div class="region">
                    <h2 class="region-title">West Region</h2>
                    <div id="west-bracket" class="bracket"></div>
                </div>
                <div class="region">
                    <h2 class="region-title">East Region</h2>
                    <div id="east-bracket" class="bracket"></div>
                </div>
            </div>

            <div class="regions-row">
                <div class="region">
                    <h2 class="region-title">South Region</h2>
                    <div id="south-bracket" class="bracket"></div>
                </div>
                <div class="region">
                    <h2 class="region-title">Midwest Region</h2>
                    <div id="midwest-bracket" class="bracket"></div>
                </div>
            </div>

            <div class="final-four-container">
                <h2 class="final-four-title">Final Four & Championship</h2>
                <div id="final-four-bracket" class="bracket"></div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // Generate teams for each region
            function generateTeams(region) {
                let teams = [];
                for (let i = 1; i <= 16; i++) {
                    teams.push([`${i}. ${region} Team ${i}`, ""]);
                }

                // Create first round matchups (1 vs 16, 8 vs 9, etc.)
                return [
                    [teams[0], teams[15]],  // 1 vs 16
                    [teams[7], teams[8]],   // 8 vs 9
                    [teams[4], teams[11]],  // 5 vs 12
                    [teams[3], teams[12]],  // 4 vs 13
                    [teams[5], teams[10]],  // 6 vs 11
                    [teams[2], teams[13]],  // 3 vs 14
                    [teams[6], teams[9]],   // 7 vs 10
                    [teams[1], teams[14]]   // 2 vs 15
                ];
            }

            // Initialize regional brackets
            const regions = ['west', 'east', 'south', 'midwest'];
            let regionWinners = {};

            regions.forEach(region => {
                $(`#${region}-bracket`).bracket({
                    skipConsolationRound: true,
                    teamWidth: 150,
                    scoreWidth: 30,
                    matchMargin: 40,
                    roundMargin: 50,
                    init: {
                        teams: generateTeams(region.charAt(0).toUpperCase() + region.slice(1)),
                        results: [[], [], [], []]  // Empty results for each round
                    },
                    save: function (data) {
                        // Store the Elite 8 winner (Final Four qualifier)
                        if (data.results[3] && data.results[3][0] !== undefined) {
                            const winnerIdx = data.results[3][0];
                            const winnerSeed = parseInt(data.teams[0][winnerIdx][0].split('.')[0]);
                            regionWinners[region] = {
                                name: data.teams[0][winnerIdx][0],
                                seed: winnerSeed,
                                region: region.charAt(0).toUpperCase() + region.slice(1)
                            };

                            // Update Final Four bracket when all regions have a winner
                            if (Object.keys(regionWinners).length === 4) {
                                updateFinalFour();
                            }
                        }
                    }
                });
            });

            // Initialize Final Four and Championship bracket
            function updateFinalFour() {
                const finalFourTeams = [
                    [[regionWinners.east.name, ""], [regionWinners.west.name, ""]],
                    [[regionWinners.south.name, ""], [regionWinners.midwest.name, ""]]
                ];

                $('#final-four-bracket').bracket({
                    skipConsolationRound: true,
                    teamWidth: 150,
                    scoreWidth: 30,
                    matchMargin: 40,
                    roundMargin: 50,
                    init: {
                        teams: finalFourTeams,
                        results: [[], []] // Empty results for semifinals and final
                    }
                });
            }

            // Initialize with mock data for Final Four
            const mockFinalFour = [
                [["East Champion", ""], ["West Champion", ""]],
                [["South Champion", ""], ["Midwest Champion", ""]]
            ];

            $('#final-four-bracket').bracket({
                skipConsolationRound: true,
                teamWidth: 150,
                scoreWidth: 30,
                matchMargin: 40,
                roundMargin: 50,
                init: {
                    teams: mockFinalFour,
                    results: [[], []] // Empty results for semifinals and final
                }
            });
        });
    </script>
</body>

</html>